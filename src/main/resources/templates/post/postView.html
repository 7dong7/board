<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>게시글 상세</title>
    <link rel="stylesheet" href="/css/post/postView.css">
</head>
<body>
<div class="container">
    <div class="header">
        <h1 class="board-title">게시글</h1>

    </div>
    <div class="post-info">
        <div class="post-title">
            <span class="post-category">[카테고리]</span> <!-- 아직 없음 -->
            <span th:text="${post.title}">게시글 제목</span>
            <span class='post-viewCount' th:text="'['+${post.viewCount}+']'">조회수</span>
        </div>
        <hr class="divider">
        <div class="post-meta">
            <span class="post-author" th:text="'작성자: ' + ${post.username}">작성자</span>
            <span class="post-date" th:text="'작성일: ' + ${#temporals.format(post.createdAt, 'yyyy-MM-dd HH:mm:ss')}">작성일 2024-06-17 15:30</span>
        </div>
    </div>

    <div class="post-content">
        <p th:text="${post.content}">
            여기에 게시글 본문이 들어갑니다.
        </p>
    </div>
    <hr class="divider">
    <div class="comments">
        <h2>댓글</h2>
        <ul class="comment-list">
            <li th:each="comment : ${post.commentDtoPage}">
                <div class="comment-info">
                    <span class="comment-author" th:text="${comment.author}">작성자</span>
                    <span class="comment-date" th:text="${#temporals.format(comment.createdAt, 'yyyy-MM-dd HH:mm:ss')}">작성일</span>
                </div>
                <div class="comment-content" th:text="${comment.content}"></div>
            </li>
        </ul>
    </div>
    <!-- 페이지네이션 -->
    <div class="pagination">
        <!-- 처음 페이지 -->
        <a th:href="@{/posts/{id}(id=${post.postId}, page=1)}"
           th:if="${!post.commentDtoPage.first}">처음</a>

        <!-- 이전 페이지 -->
        <a th:href="@{/posts/{id}(id=${post.postId}, page=${post.commentDtoPage.number})}"
           th:if="${post.commentDtoPage.hasPrevious()}">이전</a>

        <!-- 페이지 번호 반복 출력 -->
        <span th:each="page : ${#numbers.sequence(1, post.commentDtoPage.totalPages)}"
              th:if="${page >= post.commentDtoPage.number + 1 - 3 and page <= post.commentDtoPage.number + 1 + 3}">
            <a th:href="@{/posts/{id}(id=${post.postId}, page=${page})}"
               th:text="${page}"
               th:classappend="${page == post.commentDtoPage.number + 1} ? 'active'">1</a>
        </span>

        <!-- 다음 페이지 -->
        <a th:href="@{/posts/{id}(id=${post.postId}, page=${post.commentDtoPage.number + 2})}"
           th:if="${post.commentDtoPage.hasNext()}">다음</a>

        <!-- 마지막 페이지 -->
        <a th:href="@{/posts/{id}(id=${post.postId}, page=${post.commentDtoPage.totalPages})}"
           th:if="${!post.commentDtoPage.last}">마지막</a>
    </div>
    <div class="footer">
        <a href="/post" class="back-link">목록으로 돌아가기</a>
    </div>
</div>
</body>
</html>
